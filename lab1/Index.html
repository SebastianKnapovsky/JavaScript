<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rozgrzewka, praca z DOM i zdarzeniami dokkumentu</title>
    
    

    <style>

    </style>
</head>

<body>
    <main>
        
        <div>
            <div id="row"> 
                <input type="number" class="abc" value=0 oninput="calculate()">
                <input type="number" class="abc" value=0 oninput="calculate()">
                <input type="number" class="abc" value=0 oninput="calculate()">
            </div>
            
            <button onclick="calculate()">Przelicz</button>
            <button onclick="addField()">Dodaj Pole</button>
            <button onclick="deleteField()">Usuń Pole</button>

            <div id="result1"></div>
            <div id="result2"></div>
            <div id="result3"></div>
            <div id="result4"></div>
        </div>
    </main>
</body>

<script type="text/javascript">
    
function calculate(){
    let x1 = document.querySelectorAll(".abc");

    let suma = 0;
    let srednia= 0;
    let vMin= 0;
    let vMax= 0;
    let arr = [];

    x1.forEach((e)=>{
        if(!isNaN(e.valueAsNumber)){
            suma += e.valueAsNumber;
            srednia += e.valueAsNumber;
            arr.push(e.valueAsNumber);
        }else console.log("error");
    });
   
    document.querySelector("#result1").textContent = "Suma :" + suma;
    document.querySelector("#result2").textContent = "Średnia :" + srednia/x1.length;

     document.querySelector("#result3").textContent = "V.Min :" + Math.min(...arr);
     document.querySelector("#result4").textContent = "V.Max :" + Math.max(...arr);

}

function addField(){
    let row = document.getElementById('row');
    let element = document.createElement('input');
    element.type='number';
    element.className='abc';
    element.value=0;
    element.oninput = calculate;
    row.appendChild(element);
    calculate();
}

function deleteField(){
    let x1 = document.querySelectorAll(".abc");
    x1.forEach(e=>{
        if (e.value == 0) e.parentNode.removeChild(e);
    });
    calculate();
}

</script>

</html>